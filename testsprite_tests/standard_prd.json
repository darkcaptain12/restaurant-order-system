{
  "meta": {
    "project": "Restoran Sipariş Yönetim Sistemi",
    "date": "2025-11-12",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "Restoran Sipariş Yönetim Sistemi is a comprehensive order management solution tailored for restaurants and cafes. Built with a Node.js and Express backend and a React + Vite frontend, it offers real-time order tracking, role-based dashboards, and detailed reporting without the need for a traditional database, relying instead on JSON files for data storage.",
  "core_goals": [
    "Provide a seamless order management experience for all restaurant staff including waiters, kitchen, bar, cashier, and admin.",
    "Enable real-time updates across all user interfaces using WebSocket technology.",
    "Facilitate efficient menu, table, staff, and payment management from dedicated role-based dashboards.",
    "Offer robust reporting capabilities covering live revenue, daily, weekly, and monthly analytics.",
    "Ensure secure authentication and role-based access control via PINs with session management.",
    "Support end-to-end order lifecycle management including creation, status updates, cancellation with reasons, and payment processing."
  ],
  "key_features": [
    "PIN-based authentication system with role-based access control for secure login and session management.",
    "WebSocket-powered real-time updates broadcasting order, menu, and payment changes instantly across all user interfaces.",
    "Dedicated dashboards for each user role: Waiter (order management and table layout), Kitchen (kitchen-category order management), Bar (bar-category order management), Cashier (payment processing), and Admin (comprehensive control panel).",
    "Visual 20-table layout supporting status tracking (empty, pending, ready, served) and table transfer functionalities.",
    "Comprehensive order management features including segmented menu ordering, cart management, order lifecycle updates, cancellation with reasons, and payment completion.",
    "Menu management with full CRUD support, including categories (kitchen/bar/dessert/campaign) and special campaign menu handling.",
    "Payment module supporting cash and card payments, discount application, and detailed payment history logging.",
    "Dynamic reporting system with live revenue updates, granular sales reports per staff, top products, and payment method breakdowns.",
    "Staff management enabling creation and deletion of waiter and cashier roles with secure PIN authentication.",
    "JSON-based persistent data storage for users, menus, active and completed orders ensuring simple file-based CRUD operations.",
    "React Router-based navigation with protected routes ensuring users see only their authorized sections with automatic redirects."
  ],
  "user_flow_summary": [
    "User authenticates via PIN on the login page, routed according to their role with secured session maintenance.",
    "Waiters select tables from a visual layout, add menu items categorized by kitchen/bar/dessert/campaign, manage cart, and submit orders.",
    "Kitchen and bar staff view their respective category orders, update statuses (Pending → In Progress → Ready), and cancel items with reasons, moving completed items automatically to history.",
    "Waiters track order statuses and mark ready orders as served; they can also move tables and monitor all tables' statuses.",
    "Cashiers select tables, view bills, apply discounts, choose payment type (cash or card), and finalize payments, which resets table status to empty.",
    "Admins access a full dashboard to manage menus, staff, view live and periodic revenue reports, switch user roles, and perform daily reset operations at midnight."
  ],
  "validation_criteria": [
    "Successful authentication and role-based access with correct redirect to respective dashboards.",
    "Real-time update propagation across all users upon order creation, status changes, menu edits, and payment completions verified via WebSocket.",
    "Order lifecycle process tested end-to-end: creation, status transitions, item cancellations with reasons, serving, and payment flow.",
    "Menu management tested for full CRUD functionality, including campaign menu item grouping and extras.",
    "Table management verified for visual correctness, status tracking, and table transfer operations.",
    "Payment processing checked for both cash and card payments with discount application and payment history accuracy.",
    "Reporting output validated for accuracy in live revenue, daily/weekly/monthly reports, waiter sales, and payment method analysis.",
    "Staff management operating correctly for adding and deleting waiters and cashiers with secure PIN registration.",
    "System data persistence confirmed through JSON file modifications and integrity maintenance.",
    "Routing and navigation ensure protected route access per user role with proper session handling and invalid PIN handling."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React",
      "Vite",
      "Express",
      "WebSocket",
      "Tailwind CSS",
      "React Router",
      "JSON"
    ],
    "features": [
      {
        "name": "Authentication System",
        "description": "PIN-based authentication system with role-based access control. Supports login, logout, and session management.",
        "files": [
          "client/src/pages/Login.tsx",
          "client/src/hooks/useAuth.ts",
          "client/src/components/ProtectedRoute.tsx",
          "server/src/auth.ts"
        ]
      },
      {
        "name": "WebSocket Real-time Updates",
        "description": "Real-time communication system using WebSocket for live order updates, menu changes, and payment notifications.",
        "files": [
          "client/src/hooks/useWebSocket.ts",
          "server/src/index.ts"
        ]
      },
      {
        "name": "Waiter Dashboard",
        "description": "Dashboard for waiters to manage tables, create orders, view menu, and track order status. Features 20-table layout, cart management, and order tracking.",
        "files": [
          "client/src/pages/WaiterDashboard.tsx"
        ]
      },
      {
        "name": "Kitchen Dashboard",
        "description": "Dashboard for kitchen staff to view and manage kitchen category orders. Supports order status updates (PENDING, IN_PROGRESS, READY), cancellation with reasons, and completed orders history.",
        "files": [
          "client/src/pages/KitchenDashboard.tsx"
        ]
      },
      {
        "name": "Bar Dashboard",
        "description": "Dashboard for bar staff to view and manage bar category orders. Similar functionality to kitchen dashboard but filtered for bar items.",
        "files": [
          "client/src/pages/BarDashboard.tsx"
        ]
      },
      {
        "name": "Admin Dashboard",
        "description": "Comprehensive admin panel with menu management, staff management, live revenue reports, daily/weekly/monthly reports, and role switching capabilities.",
        "files": [
          "client/src/pages/AdminDashboard.tsx"
        ]
      },
      {
        "name": "Cashier Dashboard",
        "description": "Dashboard for cashiers to view table orders, process payments (cash/card), apply discounts, and complete transactions.",
        "files": [
          "client/src/pages/CashierDashboard.tsx"
        ]
      },
      {
        "name": "Order Management",
        "description": "Complete order lifecycle management including order creation, status updates, table movement, cancellation, and payment processing.",
        "files": [
          "client/src/pages/WaiterDashboard.tsx",
          "client/src/pages/KitchenDashboard.tsx",
          "client/src/pages/BarDashboard.tsx",
          "server/src/index.ts"
        ]
      },
      {
        "name": "Menu Management",
        "description": "Menu item CRUD operations with support for categories (kitchen/bar/dessert/campaign), pricing, and special items like campaign menus with multiple items.",
        "files": [
          "client/src/pages/AdminDashboard.tsx",
          "server/src/index.ts",
          "server/data/menu.json"
        ]
      },
      {
        "name": "Table Management",
        "description": "Visual table layout system with 20 tables, status tracking (empty/pending/ready/served), and table movement functionality.",
        "files": [
          "client/src/pages/WaiterDashboard.tsx",
          "client/src/pages/CashierDashboard.tsx"
        ]
      },
      {
        "name": "Payment System",
        "description": "Payment processing with support for cash and card payments, discount application, and payment history tracking.",
        "files": [
          "client/src/pages/CashierDashboard.tsx",
          "server/src/index.ts"
        ]
      },
      {
        "name": "Reporting System",
        "description": "Comprehensive reporting system with live revenue tracking, daily/weekly/monthly reports, waiter sales analysis, top products, and payment method breakdowns.",
        "files": [
          "client/src/pages/AdminDashboard.tsx",
          "server/src/index.ts"
        ]
      },
      {
        "name": "Staff Management",
        "description": "Admin functionality to create and delete waiter and cashier staff members with PIN-based authentication.",
        "files": [
          "client/src/pages/AdminDashboard.tsx",
          "server/src/auth.ts",
          "server/src/index.ts"
        ]
      },
      {
        "name": "Data Management",
        "description": "JSON-based data persistence for users, menu, orders, and completed orders with file-based CRUD operations.",
        "files": [
          "server/src/dataManager.ts",
          "server/data/users.json",
          "server/data/menu.json",
          "server/data/orders.json",
          "server/data/completed-orders.json"
        ]
      },
      {
        "name": "Routing System",
        "description": "React Router based navigation with protected routes based on user roles and automatic redirects.",
        "files": [
          "client/src/App.tsx",
          "client/src/components/ProtectedRoute.tsx"
        ]
      }
    ]
  }
}
